{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>The solution Real-time Fraud Detection with Graph Neural Network on DGL is an end-to-end solution for real-time fraud detection which leverages graph database Amazon Neptune, Amazon SageMaker and Deep Graph Library (DGL) to construct a heterogeneous graph from tabular data and train a Graph Neural Network(GNN) model to detect fraudulent transactions in the IEEE-CIS dataset.</p> <p>The solutions consists of below major features:</p> <ul> <li>uses the Deep Graph Library(DGL) to build machine learning model. DGL is an advanced open source framework designed for graph neural network</li> <li>has a complete workflow pipeline for model training and updating, including data ingesting, data processing, model training, model rolling update</li> <li>leverages Graph database to do real-time fraud detection</li> </ul> <p>This implementation guide discusses architectural considerations and configuration steps for deploying the Real-time Fraud Detection with Graph Neural Network on DGL solution in the Amazon Web Services (AWS) Cloud. It includes a link to an AWS CloudFormation template that launches and configures the AWS services required to deploy this solution using AWS best practices for security and availability.</p> <p>The guide is intended for IT architects, developers, DevOps and data analysts who have practical experience architecting in the AWS Cloud and data scientists and algorithm engineers with few AWS knowledge.</p>"},{"location":"architecture/","title":"Architecture overview","text":"<p>Deploying this solution with the default parameters builds the following environment in the AWS Cloud.</p> <p></p> <p>Figure 1\uff1aarchitecture of construct graph data, model training and model deployment</p> <p></p> <p>Figure 2\uff1aarchitecture of real-time fraud detection and business monitor system</p> <p>This solution deploys five AWS CloudFormation templates in your AWS account and sets up the following:</p> <ol> <li>The first AWS CloudFormation template <code>realtime-fraud-detection-with-gnn-on-dgl</code> creates:<ul> <li>an Amazon Virtual Private Cloud (Amazon VPC) running a NAT gateway, and an internet gateway.</li> <li>a Graph database Amazon Neptune cluster with one read replica\uff0cthe default instance size is <code>db.r5.xlarge</code>.</li> <li>an Amazon SQS message queue\u3002</li> </ul> </li> <li>The second CloudFormation template starting with <code>realtime-fraud-detection-with-gnn-on-dgl-trainingNestedStack</code> creates:<ul> <li>an AWS Step Functions workflow pipeline trains the model from tabular finance trasaction dataset, then deploy the online infernce endpoint.</li> <li>AWS Glue data catalog and ETL job are used transforming the original tabular data to graph structure data.</li> <li>Amazon ECS on AWS Fargate import the graph data into graph database Amazon Neptune.</li> <li>Amazon SageMaker trains model and deploy the online inference endpoint.</li> <li>AWS Lambda functions implement raw data ingesting, post-processing after model training and other glue work.</li> </ul> </li> <li>The third CloudFormation template starting with <code>realtime-fraud-detection-with-gnn-on-dgl-inferenceNestedStack</code> creates:<ul> <li>AWS Lambda function implements the real-time fraud detection endpoint.</li> </ul> </li> <li>The fourth CloudFormation tempalte starting with <code>realtime-fraud-detection-with-gnn-on-dgl-dashboardNestedStack</code> creates: <ul> <li>Amazon DocumentDB stores the transactions and their properties, its credential is saved in AWS Secrets Manager.</li> <li>AWS Lambda function receives the real-time online trasactions and stores in DocumentDB.</li> <li>the business dashboard website hosting in Amazon S3 and distributed by Amazon CloudFront.</li> <li>the backend of business dashboard consits of Amazon API Gateway and AWS AppSync.</li> </ul> </li> <li>The fifth CloudFormation template starting with <code>realtime-fraud-detection-with-gnn-on-dgl-DashboardDatabaseRotation</code> creates:<ul> <li>AWS Lambda function will periodically rotate the user credential of DocumentDB stored in Secrets Manager.</li> </ul> </li> </ol> <p>For redundancy, the Amazon VPCs are created with subnets in two Availability Zones (AZs) for high availability. The NAT gateway, Amazon Neptune, Amazon DocumentDB, AWS Glue and other AWS resources are deployed across these two AZs.</p> <p>NOTE: AWS CloudFormation resources are created from AWS Cloud Development Kit (CDK) (AWS CDK) constructs.</p>"},{"location":"components/","title":"Components","text":""},{"location":"components/#the-pipeline-of-data-processing-model-training-and-deployment","title":"the pipeline of data processing, model training and deployment","text":"<p>The solution uses AWS Step Functions workflow orchestrate the pipeline from raw IEEE-CIS dataset, graph data processing, training GNN model and inference endpoint deployment. Below is the detail for each workflow step,</p> <ol> <li>Use AWS Lambda function downloads dataset to Amazon S3 bucket</li> <li>Execute AWS Glue crawler to build Glue Data Catalog from dataset</li> <li>Execute AWS Glue ETL job processing the raw data, converting the tabular data to graph structure data, then write to S3 bucket</li> <li>Use Amazon SageMaker trains the GNN model on DGL</li> <li>After training the model, loading graph structure data into graph database Neptune Amazon Neptune</li> <li>Package the custom inference code with model</li> <li>Use Amazon SageMaker to create model, configure endpoint configuration and deploying inference endpoint</li> </ol>"},{"location":"components/#real-time-fraud-detection-and-business-monitor-system","title":"real-time fraud detection and business monitor system","text":""},{"location":"components/#real-time-fraud-detection","title":"real-time fraud detection","text":"<p>The solution follows below steps for implementing real-time fraud detection,</p> <ol> <li>Process the online transaction data as the graph structure data</li> <li>Insert the graph data(vertices, edges and relationships) into graph database Neptune</li> <li>Query the sub-graph of current transaction vertice and its 2nd connected vertices</li> <li>Send the data of sub-graph to inference endpoint to get the possibility of fraudulent of the transaction. Then publish the transaction and its fraudulent possibility to Amazon SQS queue</li> </ol>"},{"location":"components/#business-monitor-system","title":"business monitor system","text":"<p>The solution uses below services consisting of the monitor system of fraudulent transactions,</p> <ul> <li>Use AWS Lambda function to process the online transaction in SQS queue, then store them into Amazon DocumentDB</li> <li>Provide the transaction stats interface via AWS AppSync</li> <li>The web app of monitor system is deployed on Amazon S3, and it's distributed by CDN Amazon CloudFront</li> <li>Mock up the online transactions via AWS Step Functions, which uses test data in IEEE-CIS dataset requesting the API of fraud detection of transactions</li> <li>Amazon API Gateway provides the authentication for AppSync interface and trigger the simulation of online transactions</li> </ul>"},{"location":"data-scientist/","title":"Data scientist","text":"<p>There are Jupyter notebooks for data engineering/scientist playing with the data featuring, model training and deploying inference endpoint without deploying this solution.</p>"},{"location":"deployment/","title":"Deployment","text":"<p>Before you launch the solution, review the supported region, architecture and components in this guide. Follow the step-by-step instructions in this section to configure and deploy the solution into your account.</p> <p>Time to deploy: Approximately 30 minutes</p>"},{"location":"deployment/#deployment-overview","title":"Deployment overview","text":"<p>The procedure of deploying this architecture on AWS consists of the following steps. For detailed instructions, follow the links for each step.</p> <p>Step 1. Launch the stack</p> <ul> <li>Launch the AWS CloudFormation template into your AWS account.</li> <li>Review the template parameters, and adjust if necessary.</li> </ul> <p>Step 2. Launch the pipeline of data processing, model training and deploying</p> <ul> <li>Start the pipeline of model training and deployment.</li> </ul> <p>Step 3. simulate the online transactions</p> <ul> <li>Get the visualization stats result of real-time fraud detection.</li> </ul>"},{"location":"deployment/#step-1-launch-the-stack","title":"Step 1. Launch the stack","text":"<p>This automated AWS CloudFormation template deploys the solution in the AWS Cloud.</p> <ol> <li> <p>Sign in to the AWS Management Console and use one of the buttons below to launch the AWS CloudFormation template.</p> <ul> <li>Launch solution</li> <li>Launch solution with custom domain of business system</li> </ul> <p>Optionally, you can download the template as a starting point for your own implementation.</p> </li> <li> <p>The template launches in the US East (N. Virginia) Region by default. To launch this solution in a different AWS Region, use the Region selector in the console navigation bar.</p> </li> <li>On the Create stack page, verify that the correct template URL shows in the Amazon S3 URL text box and choose Next.</li> <li>On the Specify stack details page, assign a valid and account level unique name to your solution stack. This ensures all the resources in the stack remain under the maximum length allowed by CloudFormation. For information about naming character limitations, refer to IAM and STS Limits in the <code>AWS Identity and Access Management User Guide</code>.</li> <li> <p>Under Parameters, review the parameters for the template and modify them as necessary. This solution uses the following default values.</p> Parameter Default Description NeptuneInstaneType db.r5.xlarge Specify the instance size of Neptune, the available value contains, db.r5.xlarge\u3001db.r5.2xlarge\u3001db.r5.4xlarge\u3001db.r5.8xlarge\u3001db.r5.12xlarge <p>Below parameters only are required when deploying the solution with custom domain name of business system.</p> Parameter Default Description DashboardDomain Special the custom domain of business system deployed by solution. Note: it must be the sub-domain of the domain given by below public zone of R53 Route53HostedZoneId select the public hosted zone of <code>Route 53</code> in account </li> <li> <p>Choose Next.</p> </li> <li>On the Configure stack options page, choose Next.</li> <li>On the Review page, review and confirm the settings. Check the box acknowledging that the template will create AWS Identity and Access Management (IAM) resources.</li> <li>Choose Create stack to deploy the stack.</li> </ol> <p>You can view the status of the stack in the AWS CloudFormation Console in the Status column. You should receive a CREATE_COMPLETE status in approximately thirty minutes.</p>"},{"location":"deployment/#step-2-launch-the-pipeline-of-data-processing-model-training-and-deploying","title":"Step 2. Launch the pipeline of data processing, model training and deploying","text":"<p>Using AWS Step Functions workflow deployed by the solution processes the transaction data, trains the GNN model and deploys the inference endpoint.</p> <ol> <li>Sign in to the AWS Management Console.</li> <li>Go to AWS Step Functions service, choose State machines\u3002</li> <li>Choose the name of state machine starting with ModelTrainingPipeline, choose Start execution, use the default input to start execution.</li> </ol> <p>You can view the execution status of details of execution. You should receive a Succeeded status in approximately three hours.</p> <p>Note\uff1a The complete execution time of pipeline depends on the instance size of Amazon Neptune, choose <code>db.r5.8xlarge</code> or above size\uff0cthe execution is approximately two hours.</p>"},{"location":"deployment/#step-3-simulate-the-online-transactions","title":"Step 3. simulate the online transactions","text":"<ol> <li>Access the business system deployed by the solution. The url of business system can be found in the output of AWS CloudFormation stack. Go to AWS CloudFormation console, choose the stack name starting with <code>realtime-fraud-detection-with-gnn-on-dgl</code> or the custom name specified in deployment time, choose Outputs, find the key <code>DashboardWebsiteUrl</code>, its value is the url of business system that is either the CloudFront domain name or custom domain name.</li> <li>Choose SIMULATE DATA button, input the valid parameters of simulation, including the duration(seconds) of simulation, concurrent number and the interval(seconds) between two simuated requests. If using the default parameters, it will use ten concurrent programs to simulate the online transactions five minutes with three seconds interval between two requests. After setting the parameters, choose SIMULATE button to start the simulation.</li> <li>It might cost about two minutes to prepare transactions data in simulation backend program, after approximately three minutes, the monitor system will receive the stats of online transactions, including the number of transactions requesting in system, the number of fraudulent transactions in latest five minutes.</li> </ol>"},{"location":"regions/","title":"Supported regions","text":""},{"location":"regions/#supported-aws-regions","title":"Supported AWS regions","text":"<p>The solution is using graph database Amazon Neptune for real-time fraud detection and Amazon DocumentDB for dashboard. Due to the availability of those services, the solution supports to be deployed to below regions,</p> <ul> <li>US East (N. Virginia):   us-east-1</li> <li>US East (Ohio):   us-east-2</li> <li>US West (Oregon):   us-west-2</li> <li>Canada (Central):   ca-central-1</li> <li>South America (S\u00e3o Paulo):   sa-east-1</li> <li>Europe (Ireland):   eu-west-1</li> <li>Europe (London):   eu-west-2</li> <li>Europe (Paris):   eu-west-3</li> <li>Europe (Frankfurt):   eu-central-1</li> <li>Asia Pacific (Tokyo):   ap-northeast-1</li> <li>Asia Pacific (Seoul):   ap-northeast-2</li> <li>Asia Pacific (Singapore):   ap-southeast-1</li> <li>Asia Pacific (Sydney):   ap-southeast-2</li> <li>Asia Pacific (Mumbai):   ap-south-1</li> <li>China (Beijing) Region operated by Sinnet:   cn-north-1</li> <li>China (Ningxia) Region operated by NWCD:   cn-northwest-1</li> </ul>"},{"location":"uninstall/","title":"Uninstall the solution","text":"<p>To uninstall the Real-time Fraud Detection with Graph Neural Network on DGL solution, delete the AWS CloudFormation stack. This will delete all the resources created by the template except the S3 buckets starting with <code>realtime-fraud-detection-frauddetectiondatabucket</code> and <code>realtime-fraud-detection-bucketaccesslog</code>. These two buckets will be retained when the solution stack is deleted in order to help prevent accidental data loss. You can use either the AWS Management Console or the AWS Command Line Interface (AWS CLI) to empty, then delete those S3 buckets after deleting the CloudFormation stack.</p>"},{"location":"uninstall/#using-the-aws-management-console","title":"Using the AWS Management Console","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>Select this solution\u2019s installation parent stack, the default is <code>realtime-fraud-detection-with-gnn-on-dgl</code>.</li> <li>Choose Delete.</li> </ol>"},{"location":"uninstall/#using-aws-command-line-interface","title":"Using AWS Command Line Interface","text":"<p>Determine whether the AWS Command Line Interface (AWS CLI) is available in your environment. For installation instructions, refer to What Is the AWS Command Line Interface in the AWS CLI User Guide. After confirming that the AWS CLI is available, run the following command.</p> <pre><code>aws cloudformation delete-stack --stack-name &lt;installation-stack-name&gt; --region &lt;aws-region&gt;\n</code></pre>"},{"location":"uninstall/#deleting-the-amazon-s3-buckets","title":"Deleting the Amazon S3 buckets","text":"<p>Real-time Fraud Detection with Graph Neural Network on DGL solution creates two S3 buckets that are not automatically deleted. To delete these buckets, use the steps below.</p> <ol> <li>Sign in to the Amazon S3 console.</li> <li>Select the bucket name starting with <code>realtime-fraud-detection-frauddetectiondatabucket</code>.</li> <li>Choose Empty.</li> <li>Choose Delete.</li> <li>Select the bucket name starting with <code>realtime-fraud-detection-bucketaccesslog</code>.</li> <li>Choose Empty.</li> <li>Choose Delete.</li> </ol> <p>To delete the S3 bucket using AWS CLI, run the following command:</p> <pre><code>aws s3 rb s3://&lt;bucket-name&gt; --force\n</code></pre>"},{"location":"uninstall/#deleting-the-endpoint-of-amazon-sagemaker","title":"Deleting the endpoint of Amazon SageMaker","text":"<p>An endpoint of Amazon SageMkaker would be created after you train the model. You can remove the endpoint to avoid the recurred cost.</p> <ol> <li>Sign in to the Amazon SageMaker console.</li> <li>Select the Inference - Endpoints from left sidebar.</li> <li>Choose the endpoint with name <code>frauddetection</code>.</li> <li>Choose Actions - Delete.</li> </ol>"}]}